<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>No1 AI</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèÜ</text></svg>">
  <link rel="stylesheet" href="index.css">
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.14.1",
        "marked": "https://esm.sh/marked@^12.0.2"
      }
    }
  </script>
<link rel="stylesheet" href="/index.css">
</head>
<body>

  <!-- Sidebar for chat history and controls -->
  <aside id="sidebar">
    <div class="sidebar-header">
      <button id="new-chat-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
        <span>New Chat</span>
      </button>
    </div>
    <nav id="chat-history-list">
      <!-- Chat history items will be appended here by JS -->
    </nav>
    <div class="sidebar-footer">
        <button id="settings-button" class="icon-button" aria-label="Open Settings" title="Settings">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
          <span>Settings</span>
        </button>
        <button id="theme-toggle" class="icon-button" aria-label="Toggle Theme" title="Toggle Theme">
          <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
          <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
          <span>Theme</span>
        </button>
    </div>
  </aside>

  <!-- Main chat interface -->
  <main id="main-content">
    <header>
      <button id="menu-toggle" class="icon-button" aria-label="Toggle Menu" title="Toggle Menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
      <div class="header-title">
        <div class="header-logo">üèÜ</div>
        <div class="header-text">
          <h1 id="chat-title">No1 AI</h1>
          <div class="header-subtitle">
            <span id="persona-display">Helpful Assistant</span>
            <span class="dot">‚Ä¢</span>
            <span id="model-display">1-no1-chat</span>
          </div>
        </div>
      </div>
    </header>
    
    <div id="response-container-wrapper">
      <div id="welcome-screen">
        <div class="logo">üèÜ</div>
        <h2>Welcome to No1 AI. How can I help?</h2>
        <div class="prompt-starters">
          <div class="prompt-card" data-prompt="Write a short story about a robot who discovers music.">
            <div class="prompt-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg></div>
            <div>
              <h3>Write a short story</h3>
              <p>about a robot who discovers music</p>
            </div>
          </div>
          <div class="prompt-card" data-prompt="Explain the theory of relativity in simple terms.">
            <div class="prompt-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="m9.09 9.09.01.01L15 15"></path><path d="M14.91 9.09-.01.01L9 15"></path></svg></div>
            <div>
              <h3>Explain a concept</h3>
              <p>like the theory of relativity</p>
            </div>
          </div>
          <div class="prompt-card" data-prompt="Give me some creative ideas for a 10 year old's birthday party.">
            <div class="prompt-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-3-2V8a2 2 0 0 1 2-2h6"></path><path d="m22 2-7 2-1.5 7.5L17 14l7-7-2.5-4.5z"></path><path d="m2.5 2.5 7.5 7.5"></path></svg></div>
            <div>
              <h3>Brainstorm ideas</h3>
              <p>for a 10 year old's birthday party</p>
            </div>
          </div>
          <div class="prompt-card" data-prompt="What is 512 * (3 + 9)?">
            <div class="prompt-card-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7V4h16v3M5 10h14M5 13h14M5 16h14M5 19h14M8 22h8"></path><rect x="4" y="2" width="16" height="20" rx="2"></rect></svg></div>
            <div>
              <h3>Calculate an expression</h3>
              <p>and get an instant, accurate answer</p>
            </div>
          </div>
        </div>
      </div>
      <div id="response-container" class="hidden">
        <!-- Chat messages will be appended here -->
      </div>
      <div id="stop-generation-container" class="hidden">
        <button id="stop-generation-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
          Stop generating
        </button>
      </div>
    </div>

    <div class="form-container">
      <form id="prompt-form">
        <div id="slash-command-helper" class="hidden">
          <div class="command-info"><strong>/imagine [prompt]</strong><span>- Generate an image.</span></div>
          <div class="command-info"><strong>/voice [text]</strong><span>- Create a text-to-speech audio bubble.</span></div>
          <div class="command-info"><strong>/voicetotext</strong><span>- Transcribe an audio file.</span></div>
          <div class="command-info"><strong>/calculate [expression]</strong><span>- Evaluate a math expression accurately.</span></div>
        </div>
        <div id="file-preview-container"></div>
        <div class="input-container">
          <div class="attachment-wrapper">
              <button type="button" id="attach-file-button" class="icon-button" aria-label="Attach file" title="Attach file">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
              </button>
              <div id="attachment-menu" class="hidden">
                  <button id="attach-image-button">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                      <span>Image</span>
                  </button>
                  <button id="attach-video-button">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
                      <span>Video</span>
                  </button>
                   <button id="open-creative-studio">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0L12 2.69z"></path><path d="m12 13.5-2-2"></path><path d="m14 11.5 2 2"></path><path d="m13 12.5 2-2"></path><path d="m11 14.5-2 2"></path></svg>
                      <span>Creative Studio</span>
                  </button>
              </div>
          </div>
          <textarea id="prompt-input" placeholder="Ask No1 AI anything, or type / for commands..." rows="1"></textarea>
          <label class="search-toggle-container" title="Ground with Google Search">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <div class="switch">
              <input type="checkbox" id="google-search-toggle">
              <span class="slider round"></span>
            </div>
          </label>
          <button type="button" id="voice-input-button" class="icon-button" aria-label="Start voice conversation" title="Start voice conversation">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
          </button>
          <button type="submit" class="icon-button" aria-label="Send prompt" title="Send">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
          </button>
        </div>
        <input type="file" id="image-file-input" accept="image/*" multiple class="hidden">
        <input type="file" id="video-file-input" accept="video/*" class="hidden">
        <input type="file" id="audio-file-input" accept="audio/*" class="hidden">
      </form>
      <footer>
        <p>Powered by No1Ai. UI by Parsa Anishtayin.</p>
      </footer>
    </div>
  </main>

  <!-- Settings Modal -->
  <div id="settings-modal" class="hidden">
    <div class="modal-content">
      <button id="close-settings-button" class="icon-button" aria-label="Close Settings" title="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
      <h2>Settings</h2>
      <div class="setting">
        <label for="persona-select">Persona</label>
        <p>Choose the personality for the AI.</p>
        <select id="persona-select">
          <option value="default">Helpful Assistant</option>
          <option value="creative">Creative Writer</option>
          <option value="coder">Coding Wizard</option>
          <option value="custom">Custom</option>
        </select>
      </div>
      <div id="custom-instruction-container" class="setting hidden">
        <label for="system-instruction">Custom Instruction</label>
        <p>Provide your own system instruction for the AI.</p>
        <textarea id="system-instruction" rows="4"></textarea>
      </div>
      <div class="setting-group">
        <div class="setting">
          <label for="thinking-mode">Thinking Mode</label>
          <p>Controls how much "thinking" the model does. More thinking can improve response quality but increases latency.</p>
          <select id="thinking-mode">
            <option value="0">Disabled (Fastest)</option>
            <option value="1" selected>Enabled (Default)</option>
            <option value="2">Enhanced (Slightly Slower)</option>
            <option value="5">Complex (Slower)</option>
            <option value="10">Maximum (Slowest)</option>
            <option value="20">20x Super Intelligent</option>
            <option value="50">50x Ultra Intelligent</option>
            <option value="100">100x Quantum Supercomputer</option>
          </select>
        </div>
        <div class="setting">
          <label for="response-length">Response Length</label>
          <p>Guide the model towards shorter or longer responses.</p>
          <select id="response-length">
            <option value="short">Short</option>
            <option value="medium" selected>Medium</option>
            <option value="long">Long</option>
            <option value="super_long">Super Long</option>
          </select>
        </div>
      </div>
      <button id="save-settings-button">Save Settings</button>
    </div>
  </div>

  <!-- Creative Studio Modal -->
  <div id="creative-studio-modal" class="hidden">
    <div class="studio-content">
      <button id="close-creative-studio" class="icon-button" aria-label="Close Creative Studio" title="Close">
         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>

      <!-- Initial State -->
      <div id="studio-initial-state">
        <div class="studio-header">
          <h2>Creative Studio</h2>
          <p>Bring your ideas to life. Upload an image and write a prompt to generate a short video.</p>
        </div>
        <div class="studio-main">
          <div id="studio-image-drop-zone">
            <div class="drop-zone-prompt">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21.2 15c.7-1.2 1-2.5.7-3.9-.6-2.4-2.4-4.2-4.8-4.8-1.4-.3-2.7-.1-3.9.7L12 8 9.8 6.8c-1.2-.8-2.5-1-3.9-.7-2.4.6-4.2 2.4-4.8 4.8-.3 1.4-.1 2.7.7 3.9L2 16l10 5 10-5-1.2-1z"></path><path d="m7.8 6.8 4.2 4.2 4.2-4.2"></path><path d="M12 11v10"></path></svg>
              <span>Click to upload or drag & drop an image</span>
              <small>PNG, JPG, WEBP accepted</small>
            </div>
            <img id="studio-image-preview" class="hidden" alt="Uploaded image preview">
            <button id="studio-remove-image" class="icon-button hidden" title="Remove image">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
          </div>
          <div class="studio-controls">
            <textarea id="studio-prompt" placeholder="Describe the video you want to create..." rows="8"></textarea>
            <button id="studio-generate-button" disabled>Generate</button>
          </div>
          <input type="file" id="studio-image-input" accept="image/*" class="hidden">
        </div>
      </div>
      
      <!-- Loading State -->
      <div id="studio-loading-state" class="hidden">
        <div class="spinner"></div>
        <h3>Generating your video...</h3>
        <p id="studio-loading-message">This can take a few minutes. Please wait.</p>
      </div>

      <!-- Result State -->
      <div id="studio-result-state" class="hidden">
        <h3>Your masterpiece is ready!</h3>
        <video id="studio-result-video" controls autoplay loop muted playsinline></video>
        <div class="studio-result-actions">
          <button id="studio-download-button">Download</button>
          <button id="studio-add-to-chat-button">Add to Chat</button>
        </div>
      </div>
    </div>
  </div>

   <!-- Image Editor Modal -->
  <div id="image-editor-modal" class="hidden">
    <div class="studio-content">
      <button id="close-image-editor-button" class="icon-button" aria-label="Close Image Editor" title="Close">
         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>

      <!-- Initial State -->
      <div id="editor-initial-state">
        <div class="studio-header">
          <h2>Image Editor</h2>
          <p>Describe the changes you want to make to the image.</p>
        </div>
        <div class="editor-main">
          <div class="editor-image-container">
            <div class="image-wrapper">
              <img id="editor-original-image" src="" alt="Original image for editing">
              <span class="image-label">Original</span>
            </div>
            <div class="image-wrapper">
              <img id="editor-edited-image" src="" alt="Placeholder for edited image">
              <span class="image-label">Preview</span>
            </div>
          </div>
          <div class="editor-controls">
            <textarea id="editor-prompt" placeholder="e.g., 'Add a birthday hat on the dog'" rows="2"></textarea>
            <button id="editor-generate-button" disabled>Generate</button>
          </div>
        </div>
      </div>
      
      <!-- Loading State -->
      <div id="editor-loading-state" class="hidden">
        <div class="spinner"></div>
        <h3>Applying your edits...</h3>
      </div>

      <!-- Result State -->
      <div id="editor-result-state" class="hidden">
        <h3>Your edited image is ready!</h3>
        <div class="editor-image-container result-view">
           <div class="image-wrapper">
              <img id="editor-result-original-image" src="" alt="Original image">
              <span class="image-label">Original</span>
            </div>
            <div class="image-wrapper">
              <img id="editor-result-edited-image" src="" alt="Final edited image">
              <span class="image-label">Edited</span>
            </div>
        </div>
        <div class="studio-result-actions">
          <button id="editor-download-button">Download</button>
          <button id="editor-add-to-chat-button">Add to Chat</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="index.js"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>